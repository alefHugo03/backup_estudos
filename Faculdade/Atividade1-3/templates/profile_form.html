{% extends "base.html" %}
{% block title %}
    {% if profile and profile.get('_id') %}
        Editar Perfil
    {% else %}
        Criar Perfil
    {% endif %}
    - Conecta Investe
{% endblock %}
{% block content %}
{# Adicionada a classe customizada 'profile-form-card' #}
<div class="card shadow-sm profile-form-card">
    <div class="card-body p-4">
        <h2 class="card-title mb-4">
            {% if profile and profile.get('_id') %}
                Editar Perfil de {{ user_type | capitalize }}
            {% else %}
                Criar Perfil de {{ user_type | capitalize }}
            {% endif %}
        </h2>
        <p class="text-muted">Complete ou atualize as informações do seu perfil.</p>
        <form method="POST" action="{{ url_for('create_edit_profile') }}" enctype="multipart/form-data">
            <div class="mb-4 text-center">
                <label for="profile_image" class="form-label fw-bold">Foto de Perfil (Opcional)</label>
                <div class="mb-2">
                    <img src="{{ current_profile_image_url }}" alt="Foto de Perfil Atual" class="img-thumbnail rounded-circle" style="width: 150px; height: 150px; object-fit: cover;">
                </div>
                <input type="file" class="form-control form-control-sm w-auto mx-auto" id="profile_image" name="profile_image" accept="image/png, image/jpeg, image/gif">
                <small class="form-text text-muted">Formatos permitidos: PNG, JPG, GIF.</small>
            </div>
            <hr class="my-4">
            {% if user_type == 'empreendedor' %}
            <div id="empreendedor-fields">
                <h3 class="mb-3">Dados do Empreendedor/Loja</h3>
                <div class="mb-3">
                    <label for="nome_negocio" class="form-label">Nome da Loja/Empresa:</label>
                    <input type="text" class="form-control" id="nome_negocio" name="nome_negocio" value="{{ profile.get('nome_negocio', '') }}" required>
                </div>
                <div class="mb-3">
                    <label for="descricao_negocio" class="form-label">Descrição da Atuação:</label>
                    <textarea class="form-control" id="descricao_negocio" name="descricao_negocio" rows="3" required>{{ profile.get('descricao_negocio', '') }}</textarea>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="nicho_mercado" class="form-label">Nicho de Mercado:</label>
                        <input type="text" class="form-control" id="nicho_mercado" name="nicho_mercado" value="{{ profile.get('nicho_mercado', '') }}" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="tempo_operacao" class="form-label">Tempo de Operação no Mercado:</label>
                        <input type="text" class="form-control" id="tempo_operacao" name="tempo_operacao" value="{{ profile.get('tempo_operacao', '') }}">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="patrocinio_buscado_valor" class="form-label">Valor de Patrocínio Buscado (R$):</label>
                        <input type="text" class="form-control" id="patrocinio_buscado_valor" name="patrocinio_buscado_valor" value="{{ profile.get('patrocinio_buscado_valor', '') }}">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="patrocinio_buscado_tipo" class="form-label">Tipo de Apoio Buscado:</label>
                        <input type="text" class="form-control" id="patrocinio_buscado_tipo" name="patrocinio_buscado_tipo" value="{{ profile.get('patrocinio_buscado_tipo', '') }}">
                    </div>
                </div>
                <div class="mb-3">
                    <label for="contrapartida" class="form-label">O que Podem Oferecer em Troca:</label>
                    <textarea class="form-control" id="contrapartida" name="contrapartida" rows="3">{{ profile.get('contrapartida', '') }}</textarea>
                </div>
            </div>
            {% elif user_type == 'sponsor' %}
            <div id="sponsor-fields">
                <h3 class="mb-3">Dados do Sponsor/Patrocinador</h3>
                <div class="mb-3">
                    <label for="nome_sponsor" class="form-label">Nome (Pessoal ou Empresa):</label>
                    <input type="text" class="form-control" id="nome_sponsor" name="nome_sponsor" value="{{ profile.get('nome_sponsor', '') }}" required>
                </div>
                <div class="mb-3">
                    <label for="valor_disponivel_investimento" class="form-label">Valor de Investimento que Pretende Disponibilizar (R$):</label>
                    <input type="text" class="form-control" id="valor_disponivel_investimento" name="valor_disponivel_investimento" value="{{ profile.get('valor_disponivel_investimento', '') }}">
                </div>
                <div class="mb-3">
                    <label for="nichos_interesse" class="form-label">Nichos de Mercado de Interesse (separe por vírgulas):</label>
                    <input type="text" class="form-control" id="nichos_interesse" name="nichos_interesse" value="{{ profile.get('nichos_interesse', []) | join(', ') }}">
                </div>
                <div class="mb-3">
                    <label for="expectativa_retorno" class="form-label">Expectativa de Retorno:</label>
                    <input type="text" class="form-control" id="expectativa_retorno" name="expectativa_retorno" value="{{ profile.get('expectativa_retorno', '') }}">
                </div>
                <div class="mb-3">
                    <label for="expertise_adicional" class="form-label">Expertises Adicionais que Pode Oferecer:</label>
                    <textarea class="form-control" id="expertise_adicional" name="expertise_adicional" rows="3">{{ profile.get('expertise_adicional', '') }}</textarea>
                </div>
            </div>
            {% endif %}
            <hr class="my-4">
            <h3 class="mb-3">Informações de Contato (Públicas no Perfil)</h3>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="contato_email" class="form-label">E-mail de Contato:</label>
                    <input type="email" class="form-control" id="contato_email" name="contato_email" value="{{ profile.get('contato_email', session.get('user_email', '')) }}" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="contato_telefone" class="form-label">Telefone de Contato (Opcional):</label>
                    <input type="tel" class="form-control" id="contato_telefone" name="contato_telefone" value="{{ profile.get('contato_telefone', '') }}">
                </div>
            </div>
            <div class="d-grid mt-4">
                <button type="submit" class="btn btn-primary btn-lg">Salvar Perfil</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}